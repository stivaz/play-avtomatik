<?php
$count = get_field( 'sidebar_dev_count', 'options' ) ? get_field( 'sidebar_dev_count', 'options' ) : - 1;
$title = get_field( 'sidebar_dev_title', 'options' );
$terms = get_terms( [
	'taxonomy' => 'developer'
] );
if ( $terms ) : ?>
	<div class="custom-widget custom-widget__dev">
		<div class="custom-widget__title"><?= $title; ?></div>

		<div class="custom-widget__dev-list">
			<?php foreach ( $terms as $term ) :
				$term_logo = get_field( 'logo', $term );
				$term_logo_bg = get_field( 'logo_bg', $term );
				$term_link = get_term_link( $term->term_id, 'developer' );
				?>
				<a href="<?php echo get_term_link( $term->term_id ); ?>" class="custom-widget__dev-item">
					<span class="custom-widget__dev-img" style="background-color: <?= $term_logo_bg; ?>;">
						<img src="<?= kama_thumb_src( 'w=230 &nocrop=true', $term_logo['ID'] ); ?>" title="Автоматы от <?= $term_logo['title']; ?>" alt="<?= $term_logo['alt']; ?>">
					</span>
					<span class="custom-widget__dev-title">
						<svg width="18" height="13" viewBox="0 0 18 13" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M17.7473 2.99632L15.1887 0.322023C14.9871 0.11137 14.7455 0 14.49 0H3.53719C3.27557 0 3.00394 0.120626 2.8106 0.322703L0.254027 2.99466C0.090218 3.16583 0 3.39344 0 3.63553C0 3.87761 0.090218 4.10523 0.253991 4.27644L8.31181 12.6983C8.48328 12.8776 8.70749 12.9816 8.94781 12.9948C8.95009 12.9952 8.95244 12.9955 8.95472 12.9959C8.95754 12.9963 8.96029 12.997 8.96311 12.9974C8.96517 12.9976 8.96719 12.998 8.96921 12.9982C8.97511 12.9988 8.98114 12.999 8.98718 12.9992C8.99137 12.9994 8.99553 13 8.99972 13C8.99979 13 8.99986 13 8.99994 13C9.00001 13 9.00008 13 9.00015 13C9.00431 13 9.0085 12.9994 9.0127 12.9992C9.0187 12.999 9.02473 12.9988 9.03066 12.9982C9.03272 12.998 9.03474 12.9976 9.03677 12.9974C9.03959 12.997 9.04233 12.9964 9.04512 12.9959C9.04743 12.9955 9.04978 12.9952 9.05209 12.9948C9.29242 12.9816 9.51659 12.8776 9.68803 12.6984L17.7465 4.27557C18.0842 3.92272 18.0846 3.34883 17.7473 2.99632ZM5.54584 3.32865L8.71081 0.90279V3.32865H5.54584ZM8.71081 3.93311V11.4174L5.13043 3.93311H8.71081ZM4.76793 3.17535L3.53806 0.604454H8.12212L4.76793 3.17535ZM8.22426 11.752L0.743359 3.93311H4.48383L8.22426 11.752ZM12.4546 5.4762C12.3118 5.40156 12.1381 5.46208 12.0667 5.61134L9.28913 11.4174V3.93311H9.86753C10.0272 3.93311 10.1567 3.79779 10.1567 3.63088C10.1567 3.46398 10.0272 3.32865 9.86753 3.32865H9.28913V0.90279L11.719 2.76527C11.7706 2.80478 11.8305 2.82382 11.8898 2.82382C11.9788 2.82382 12.0666 2.78102 12.1232 2.70025C12.2177 2.56564 12.1898 2.37653 12.0611 2.27781L9.87783 0.604417H14.4619L13.1587 3.32862H11.024C10.8643 3.32862 10.7348 3.46394 10.7348 3.63084C10.7348 3.79775 10.8643 3.93307 11.024 3.93307H12.8695L12.6451 4.40232C12.5736 4.55162 12.6315 4.73318 12.7744 4.80779C12.8159 4.82948 12.86 4.83979 12.9035 4.83979C13.0095 4.83979 13.1117 4.77855 13.1623 4.67266L13.5161 3.93307H17.2563L9.77568 11.752L12.5839 5.88168C12.6553 5.73238 12.5974 5.55082 12.4546 5.4762ZM17.2474 3.32865H13.8052L14.9526 0.930142L17.2474 3.32865ZM3.04728 0.930142L4.19467 3.32865H0.752359L3.04728 0.930142Z" fill="#272D2F"/>
						</svg>
						<?= num_decline( $term->count, 'слот, слота, слотов' ); ?>
					</span>
				</a>
			<?php endforeach; ?>
		</div>
	</div>
<?php endif; ?>
